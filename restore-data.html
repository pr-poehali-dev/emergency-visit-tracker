<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö PROFIRE-–Æ–ì</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #1e293b 0%, #7e22ce 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            color: white;
        }
        .container {
            background: rgba(30, 41, 59, 0.95);
            border-radius: 16px;
            padding: 40px;
            max-width: 600px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        h1 {
            margin: 0 0 10px 0;
            font-size: 28px;
        }
        .status {
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            font-weight: 500;
        }
        .status.info {
            background: rgba(59, 130, 246, 0.2);
            border: 1px solid rgba(59, 130, 246, 0.3);
        }
        .status.success {
            background: rgba(34, 197, 94, 0.2);
            border: 1px solid rgba(34, 197, 94, 0.3);
        }
        .status.error {
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid rgba(239, 68, 68, 0.3);
        }
        button {
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 16px;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
            transition: opacity 0.2s;
        }
        button:hover {
            opacity: 0.9;
        }
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .progress {
            margin: 20px 0;
        }
        .progress-bar {
            background: rgba(100, 100, 100, 0.3);
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
        }
        .progress-fill {
            background: linear-gradient(90deg, #3b82f6, #8b5cf6);
            height: 100%;
            width: 0%;
            transition: width 0.3s;
        }
        .log {
            background: rgba(0,0,0,0.3);
            border-radius: 8px;
            padding: 15px;
            max-height: 300px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            margin-top: 20px;
        }
        .log-line {
            margin: 5px 0;
            opacity: 0.8;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö</h1>
        <p style="color: #94a3b8; margin-top: 5px;">PROFIRE-–Æ–ì - –°–∏—Å—Ç–µ–º–∞ —É—á—ë—Ç–∞ –ø–æ—Å–µ—â–µ–Ω–∏–π</p>

        <div id="status" class="status info">
            –ì–æ—Ç–æ–≤ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å <strong>17 –æ–±—ä–µ–∫—Ç–æ–≤</strong> –Ω–∞ —Å–µ—Ä–≤–µ—Ä
        </div>

        <div class="progress" id="progress" style="display: none;">
            <div style="margin-bottom: 8px; font-size: 14px;" id="progress-text">–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞...</div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
        </div>

        <button id="restore-btn" onclick="restoreData()">
            –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
        </button>

        <div class="log" id="log" style="display: none;"></div>
    </div>

    <script>
        const BACKUP_DATA = {
  "objects": [
    {
      "id": "1769205199754",
      "name": "–°—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏—è (–ì–ê–£–ó ¬´–°—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –ø–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∞ ‚Ññ 2¬ª –ú–ó –ö–ö)",
      "address": "–≥. –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, —É–ª. –ì–∏–¥—Ä–æ—Å—Ç—Ä–æ–∏—Ç–µ–ª–µ–π, 38, —É–ª. –ì–∏–¥—Ä–æ—Å—Ç—Ä–æ–∏—Ç–µ–ª–µ–π, 34",
      "description": "–ê–¥—Ä–µ—Å–Ω–∞—è –°–ü–°, –°–û–£–≠ –Ω–∞ –±–∞–∑–µ –ë–û–õ–ò–î",
      "contactName": "–í–ª–∞–¥–∏–º–∏—Ä (–∑–∞–≤—Ö–æ–∑)",
      "contactPhone": "+79964058700",
      "objectPhoto": "https://cdn.poehali.dev/projects/01f36c76-3df1-4720-9a9a-9dfe8734a6fe/bucket/profire_data/photos/obj_1769205199754.jpg",
      "objectType": "regular",
      "visits": []
    },
    {
      "id": "1769205080402",
      "name": "(–û–û–û ¬´–û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞¬ª (–∂–∏–ª–æ–π –¥–æ–º)",
      "address": "–≥. –£—Å—Ç—å-–õ–∞–±–∏–Ω—Å–∫, —É–ª. –û–∫—Ç—è–±—Ä—å—Å–∫–∞—è, 66–ë ",
      "description": "–ê–¥—Ä–µ—Å–Ω–∞—è –°–ü–°, –°–û–£–≠ –Ω–∞ –±–∞–∑–µ –Æ–ù–ò–¢–†–û–ù–ò–ö",
      "contactName": "–ï–≤–≥–µ–Ω–∏–π (–∏–Ω–∂–µ–Ω–µ—Ä —Å–ª–∞–±–æ—Ç–æ—á–Ω–∏–∫)",
      "contactPhone": "+79183130609",
      "objectPhoto": "https://cdn.poehali.dev/projects/01f36c76-3df1-4720-9a9a-9dfe8734a6fe/bucket/profire_data/photos/obj_1769205080402.jpg",
      "objectType": "regular",
      "visits": []
    },
    {
      "id": "1769204864477",
      "name": "–û–û–û ¬´–û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞¬ª (–ú–ï–î–¶–ï–ù–¢–†)",
      "address": "–≥. –£—Å—Ç—å-–õ–∞–±–∏–Ω—Å–∫, —É–ª. –ò–º. –ú–∞—Ä–∏–∏ –û–≤—Å—è–Ω–Ω–∏–∫–æ–≤–æ–π, 1–ê",
      "description": "–ê–¥—Ä–µ—Å–Ω–∞—è –°–ü–°, –°–û–£–≠, –°–ü–î–ó –Ω–∞ –†–£–ë–ï–ñ",
      "contactName": "–ï–≤–≥–µ–Ω–∏–π (–∏–Ω–∂–µ–Ω–µ—Ä —Å–ª–∞–±–æ—Ç–æ—á–Ω–∏–∫)",
      "contactPhone": "+79183130609",
      "objectPhoto": "https://cdn.poehali.dev/projects/01f36c76-3df1-4720-9a9a-9dfe8734a6fe/bucket/profire_data/photos/obj_1769204864477.jpg",
      "objectType": "regular",
      "visits": []
    },
    {
      "id": "1769204541153",
      "name": "–û–û–û ¬´–û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞¬ª (–õ–∏—Ü–µ–π)",
      "address": "–≥. –£—Å—Ç—å-–õ–∞–±–∏–Ω—Å–∫, —É–ª. –ò–º. –ú–∞—Ä–∏–∏ –û–≤—Å—è–Ω–Ω–∏–∫–æ–≤–æ–π, 20",
      "description": "–ê–¥—Ä–µ—Å–Ω–∞—è –°–ü–° –∏ –°–û–£–≠, –°–ü–î–ó, –í–ü–í –Ω–∞ –†–£–ë–ï–ñ",
      "contactName": "–ï–≤–≥–µ–Ω–∏–π (–∏–Ω–∂–µ–Ω–µ—Ä —Å–ª–∞–±–æ—Ç–æ—á–Ω—ã—Ö —Å–∏—Å—Ç–µ–º)",
      "contactPhone": "+79183130609",
      "objectPhoto": "https://cdn.poehali.dev/projects/01f36c76-3df1-4720-9a9a-9dfe8734a6fe/bucket/profire_data/photos/obj_1769204541153.jpg",
      "objectType": "regular",
      "visits": []
    },
    {
      "id": "1769204400934",
      "name": "–ê–û –°–ó \"–û–ë–î\"",
      "address": "–≥. –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, —É–ª. –¢–∏—Ö–æ—Ä–µ—Ü–∫–∞—è 20",
      "description": "–ê–¥—Ä–µ—Å–Ω–∞—è/–∞–Ω–∞–ª–æ–≥–æ–≤–∞—è –°–ü–° –Ω–∞ –±–∞–∑–µ –ë–æ–ª–∏–¥.",
      "contactName": "–ï—Å–∏–Ω –°–µ—Ä–≥–µ–π –°–µ—Ä–≥–µ–µ–≤–∏—á",
      "contactPhone": "+79298255977",
      "objectPhoto": "https://cdn.poehali.dev/projects/01f36c76-3df1-4720-9a9a-9dfe8734a6fe/bucket/profire_data/photos/obj_1769204400934.jpg",
      "objectType": "regular",
      "visits": []
    },
    {
      "id": "1769204291811",
      "name": "–ú–∞–≥–∞–∑–∏–Ω \"–ê–Ω–≥–µ–ª\" –û–û–û ¬´–≠–∫—Å–µ–ª—å—Å–∏–æ—Ä –§–µ—à–Ω –ì—Ä—É–ø–ø¬ª",
      "address": "–≥. –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –≤–Ω—É—Ç—Ä–∏–≥–æ—Ä–æ–¥—Å–∫–æ–π –æ–∫—Ä—É–≥, —É–ª. –ì–æ–≥–æ–ª—è 69.",
      "description": "–ê–¥—Ä–µ—Å–Ω–∞—è/—Ä–∞–¥–∏–æ–∫–∞–Ω–∞–ª—å–Ω–∞—è –°–ü–°, –°–û–£–≠ –æ–∫—Ç–∞–≤–∞, –í–ü–í, –°–ü–î–ó",
      "contactName": "–í–ª–∞–¥–∏–º–∏—Ä (—ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—è)",
      "contactPhone": "+79183260134",
      "objectPhoto": "https://cdn.poehali.dev/projects/01f36c76-3df1-4720-9a9a-9dfe8734a6fe/bucket/profire_data/photos/obj_1769204291811.jpg",
      "objectType": "regular",
      "visits": []
    },
    {
      "id": "1769204126090",
      "name": "–û–û–û \"–Æ–≥+—Ä–∞–∑–≤–∏—Ç–∏–µ\" –û—Ç–µ–ª—å \"–õ–µ–≥–µ–Ω–¥–∞\"",
      "address": "—É–ª. –∏–º–µ–Ω–∏ –ú–∞—Ä–∏–∏ –û–≤—Å—è–Ω–Ω–∏–∫–æ–≤–æ–π, 9, –£—Å—Ç—å-–õ–∞–±–∏–Ω—Å–∫",
      "description": "–ê–¥—Ä–µ—Å–Ω–∞—è –°–ü–°, –°–û–£–≠, –í–ü–í, –ê–£–ü–¢, –ê–£–ì–ü–¢, –°–ü–î–ó –Ω–∞ –ë–æ–ª–∏–¥–µ",
      "contactName": "–ï–≤–≥–µ–Ω–∏–π (–≥–ª–∞–≤–Ω—ã–π –∏–Ω–∂–µ–Ω–µ—Ä)",
      "contactPhone": "+79687760679",
      "objectPhoto": "https://cdn.poehali.dev/projects/01f36c76-3df1-4720-9a9a-9dfe8734a6fe/bucket/profire_data/photos/obj_1769204126090.jpg",
      "objectType": "regular",
      "visits": []
    },
    {
      "id": "1769203941691",
      "name": "–û–û–û \"–ê–†–¢ –°–ê–ô–î\"",
      "address": "–≥. –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, –ó–∏–ø–æ–≤—Å–∫–∞—è —É–ª–∏—Ü–∞, 5–í–ª–∏—Ç–¶",
      "description": "–°—Ç–∞—Ä—ã–µ –∞–Ω–∞–ª–æ–≥–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º–∞ –Ω–∞ –±–∞–∑–µ –ì–†–ê–ù–ò–¢",
      "contactName": "–ê—Ä—Ç–µ–º",
      "contactPhone": "+79064348526",
      "objectPhoto": "https://cdn.poehali.dev/projects/01f36c76-3df1-4720-9a9a-9dfe8734a6fe/bucket/profire_data/photos/obj_1769203941691.jpg",
      "objectType": "regular",
      "visits": []
    },
    {
      "id": "1769203831112",
      "name": "–î–æ–±—Ä—ã–π –Æ–ì",
      "address": "–≥. –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä,  —É–ª. –û–∫—Ç—è–±—Ä—å—Å–∫–∞—è 131.",
      "description": "–ê–¥—Ä–µ—Å–Ω–∞—è –°–ü–° –Ω–∞ –ë–æ–ª–∏–¥–µ",
      "contactName": "–†—É–¥–Ω–µ–≤–∞ –î–∞–Ω–∞",
      "contactPhone": "+79883399663",
      "objectPhoto": "https://cdn.poehali.dev/projects/01f36c76-3df1-4720-9a9a-9dfe8734a6fe/bucket/profire_data/photos/obj_1769203831112.jpg",
      "objectType": "regular",
      "visits": []
    },
    {
      "id": "1769203735587",
      "name": "–î–æ–±—Ä—ã–π –Æ–ì",
      "address": "–ø—Ä-–∫—Ç –ß–µ–∫–∏—Å—Ç–æ–≤, –¥. 10",
      "description": "–°—Ç–∞—Ä–∞—è –∞–Ω–∞–ª–æ–≥–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞",
      "contactName": "–î–∞–Ω–∞ –†—É–¥–Ω–µ–≤–∞",
      "contactPhone": "+79883399663",
      "objectPhoto": "https://cdn.poehali.dev/projects/01f36c76-3df1-4720-9a9a-9dfe8734a6fe/bucket/profire_data/photos/obj_1769203735587.jpg",
      "objectType": "regular",
      "visits": []
    },
    {
      "id": "1769203620196",
      "name": "–¢–¶ \"–í–æ—Å—Ç–æ—á–Ω–æ-–ö—Ä—É–≥–ª–∏–∫–æ–≤—Å–∫–∏–π\" (–ò–ü –ö—Ä–∞–ø–∏–≤–Ω—ã–π –ú.–ú.)",
      "address": "–≥. –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, —É–ª. –í–æ—Å—Ç–æ—á–Ω–æ-–ö—Ä—É–≥–ª–∏–∫–æ–≤—Å–∫–∞—è, –¥ 46/11",
      "description": "–°—Ç–∞—Ä–∞—è –∞–¥—Ä–µ—Å–Ω–∞—è –°–ü–° –Ω–∞ –ë–û–õ–ò–î–ï. –î–£ –∏ –ü–î",
      "contactName": "–í–∏–∫—Ç–æ—Ä–∏—è",
      "contactPhone": "+79182153866",
      "objectPhoto": "https://cdn.poehali.dev/projects/01f36c76-3df1-4720-9a9a-9dfe8734a6fe/bucket/profire_data/photos/obj_1769203620196.jpg",
      "objectType": "regular",
      "visits": []
    },
    {
      "id": "1769203459510",
      "name": "–ú–∞–≥–∞–∑–∏–Ω \"–¢—Ä–∏–∞–ª-–°–ø–æ—Ä—Ç\" ( –û–û–û \"–ß–ï–õ–ï–°–¢–ï)",
      "address": "–≥. –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, —É–ª. –û–Ω–µ–∂—Å–∫–∞—è, –¥. 3.",
      "description": "–ê–Ω–∞–ª–æ–≥–æ–≤–∞—è –°–ü–° –Ω–∞ –±–∞–∑–µ –ì–†–ê–ù–ò–¢, –í–ü–í –Ω–∞ –±–∞–∑–µ –ë–û–õ–ò–î",
      "contactName": "–ú—É—Ö–∏–Ω –°–µ—Ä–≥–µ–π –°–µ—Ä–≥–µ–µ–≤–∏—á",
      "contactPhone": "+79615806822",
      "objectPhoto": "https://cdn.poehali.dev/projects/01f36c76-3df1-4720-9a9a-9dfe8734a6fe/bucket/profire_data/photos/obj_1769203459510.jpg",
      "objectType": "regular",
      "visits": []
    },
    {
      "id": "1769203250724",
      "name": "–Æ–≥ –¢—Ä–µ–Ω–¥ –ê–≤—Ç–æ ( –ò–ü –ù–∞—É–º–µ–Ω–∫–æ –í.–í.)",
      "address": "–≥. –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, –ï. –ë–µ—Ä—à–∞–Ω—Å–∫–æ–π, 351/3",
      "description": "–ù–∞ –≤—Å–µ–º –æ–±—ä–µ–∫—Ç–µ —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ –∞–¥—Ä–µ—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–∞ –ë–û–õ–ò–î. –£–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å–µ–º –°–ò–†–ò–£–° –Ω–∞ –ö–ü–ü.",
      "contactName": "–í–∞–¥–∏–º",
      "contactPhone": "+79184824784",
      "objectPhoto": "https://cdn.poehali.dev/projects/01f36c76-3df1-4720-9a9a-9dfe8734a6fe/bucket/profire_data/photos/obj_1769203250724.jpg",
      "objectType": "regular",
      "visits": []
    },
    {
      "id": "1769202864470",
      "name": "–ü–∏—Ü—Ü–µ—Ä–∏—è ¬´–¢—É—Ç—Ç–æ –ü–∏—Ü—Ü–∞ (–û–û–û \"–†–ï–ö–û–õ–¨–¢\")",
      "address": "—É–ª. –í–æ—Å—Ç–æ—á–Ω–æ-–ö—Ä—É–≥–ª–∏–∫–æ–≤—Å–∫–∞—è 18 ",
      "description": "–ê–≤—Ç–æ–Ω–æ–º–Ω–∞—è –∞–¥—Ä–µ—Å–Ω–∞—è –°–ü–° –∏ –°–û–£–≠ –Ω–∞ –ë–û–õ–ò–î",
      "contactName": "–ï–∫–∞—Ç–µ—Ä–∏–Ω–∞ –£–ø—Ä–∞–≤–ª—è—é—â–∏–π",
      "contactPhone": "+79282461910",
      "objectPhoto": "https://cdn.poehali.dev/projects/01f36c76-3df1-4720-9a9a-9dfe8734a6fe/bucket/profire_data/photos/obj_1769202864470.jpg",
      "objectType": "regular",
      "visits": []
    },
    {
      "id": "1769202684781",
      "name": "–û–û–û \"–ö–∞–ª–∏–Ω–∏–Ω—Å–∫–∏–π –≤–æ–¥–æ–∫–∞–Ω–∞–ª\"",
      "address": "–≥. –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, —É–ª. –õ–µ—Å–æ–ø–∞—Ä–∫–æ–≤–∞—è 11.",
      "description": "–ê–Ω–∞–ª–æ–≥–æ–≤–∞—è –°–ü–° –∏ –°–û–£–≠ –Ω–∞ –±–∞–∑–µ –ë–û–õ–ò–î",
      "contactName": "–ì–∞–ª–∏–Ω–∞ –ü–µ—Ç—Ä–æ–≤–Ω–∞ –î–∏—Ä–µ–∫—Ç–æ—Ä",
      "contactPhone": "+79034500090",
      "objectPhoto": "https://cdn.poehali.dev/projects/01f36c76-3df1-4720-9a9a-9dfe8734a6fe/bucket/profire_data/photos/obj_1769202684781.jpg",
      "objectType": "regular",
      "visits": []
    },
    {
      "id": "1769202498861",
      "name": "–û–û–û \"–†–µ–∫–æ–ª—å—Ç\" (–∫–∞—Ñ–µ ¬´–°–µ–∑–æ–Ω¬ª)",
      "address": "–≥. –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, —É–ª. –ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä–∞ –ò—à—É–Ω–∏–Ω–∞ 3 ",
      "description": "–ê–¥—Ä–µ—Å–Ω–∞—è –∞–≤—Ç–æ–Ω–æ–º–Ω–∞—è –°–ü–° –∏ –°–û–£–≠ –Ω–∞ –ë–æ–ª–∏–¥–µ",
      "contactName": "–ï–∫–∞—Ç–µ—Ä–∏–Ω–∞",
      "contactPhone": "+79282461910",
      "objectPhoto": "https://cdn.poehali.dev/projects/01f36c76-3df1-4720-9a9a-9dfe8734a6fe/bucket/profire_data/photos/obj_1769202498861.jpg",
      "objectType": "regular",
      "visits": []
    },
    {
      "id": "1769202128650",
      "name": "–†–µ—Å—Ç–æ—Ä–∞–Ω \"–ê—Ç–º–æ—Å—Ñ–µ—Ä–∞\"",
      "address": "–≥. –£—Å—Ç—å-–õ–∞–±–∏–Ω—Å–∫, —É–ª. –û–∫—Ç—è–±—Ä—å—Å–∫–∞—è, 66 –ë",
      "description": "–†–µ—Å—Ç–æ—Ä–∞–Ω —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é –æ–±—â–µ–π —Å–∏—Å—Ç–µ–º—ã –¥–æ–º–∞. –í—ã–¥–µ–ª–µ–Ω—ã —Ä–∞–∑–¥–µ–ª—ã –ø–æ–¥ –Ω–µ–≥–æ. –°–∏—Å—Ç–µ–º—ã: –°–ü–°, –°–û–£–≠. –°–∏—Å—Ç–µ–º–∞ \"–Æ–Ω–∏—Ç—Ä–æ–Ω–∏–∫\"",
      "contactName": "–ò–≥–æ—Ä—å –£–ø—Ä–∞–≤–ª—è—é—â–∏–π",
      "contactPhone": "+79180896169",
      "objectPhoto": "https://cdn.poehali.dev/projects/01f36c76-3df1-4720-9a9a-9dfe8734a6fe/bucket/profire_data/photos/obj_1769202128650.jpg",
      "objectType": "regular",
      "visits": []
    }
  ],
  "users": [
    {
      "id": "1",
      "username": "director",
      "password": "director",
      "fullName": "–î–∏—Ä–µ–∫—Ç–æ—Ä",
      "role": "director",
      "createdAt": "2026-01-23T16:06:05.886Z"
    },
    {
      "id": "2",
      "username": "tech",
      "password": "tech",
      "fullName": "–¢–µ—Ö–Ω–∏–∫",
      "role": "technician",
      "createdAt": "2026-01-23T16:06:05.886Z",
      "phone": "+79673038193"
    }
  ]
};

        const SYNC_URL = 'https://functions.poehali.dev/b79c8b0e-36c3-4ab2-bb2b-123cec40662a';

        function log(message) {
            const logEl = document.getElementById('log');
            logEl.style.display = 'block';
            const line = document.createElement('div');
            line.className = 'log-line';
            line.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            logEl.appendChild(line);
            logEl.scrollTop = logEl.scrollHeight;
        }

        function updateProgress(current, total, message) {
            const progress = Math.round((current / total) * 100);
            document.getElementById('progress-fill').style.width = progress + '%';
            document.getElementById('progress-text').textContent = `${message} (${current}/${total})`;
        }

        async function restoreData() {
            const btn = document.getElementById('restore-btn');
            const status = document.getElementById('status');
            const progress = document.getElementById('progress');

            btn.disabled = true;
            progress.style.display = 'block';
            
            try {
                log('–ù–∞—á–∞–ª–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö...');
                status.className = 'status info';
                status.innerHTML = '–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ...';

                const objects = BACKUP_DATA.objects;
                const users = BACKUP_DATA.users;
                
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø–µ—Ä–≤—ã–π –æ–±—ä–µ–∫—Ç —Å users (first_batch)
                log(`–û—Ç–ø—Ä–∞–≤–∫–∞ –ø–µ—Ä–≤–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π...`);
                updateProgress(0, objects.length, '–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è');

                const firstResponse = await fetch(SYNC_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        action: 'sync',
                        objects: [objects[0]],
                        users: users
                    })
                });

                if (!firstResponse.ok) {
                    throw new Error(`HTTP ${firstResponse.status}`);
                }

                const firstResult = await firstResponse.json();
                if (firstResult.status !== 'success') {
                    throw new Error(firstResult.error || '–û—à–∏–±–∫–∞ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞');
                }

                log(`‚úì –ü–µ—Ä–≤—ã–π –æ–±—ä–µ–∫—Ç –∑–∞–≥—Ä—É–∂–µ–Ω: ${objects[0].name}`);
                updateProgress(1, objects.length, '–ó–∞–≥—Ä—É–∑–∫–∞ –æ–±—ä–µ–∫—Ç–æ–≤');

                // –û—Å—Ç–∞–ª—å–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –±–µ–∑ users
                for (let i = 1; i < objects.length; i++) {
                    const obj = objects[i];
                    log(`–û—Ç–ø—Ä–∞–≤–∫–∞ –æ–±—ä–µ–∫—Ç–∞ ${i + 1}/${objects.length}: ${obj.name}`);
                    
                    const response = await fetch(SYNC_URL, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            action: 'sync',
                            objects: [obj],
                            users: []
                        })
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status} –Ω–∞ –æ–±—ä–µ–∫—Ç–µ "${obj.name}"`);
                    }

                    const result = await response.json();
                    if (result.status !== 'success') {
                        throw new Error(`–û–±—ä–µ–∫—Ç "${obj.name}": ${result.error}`);
                    }

                    log(`‚úì –û–±—ä–µ–∫—Ç ${i + 1} –∑–∞–≥—Ä—É–∂–µ–Ω: ${obj.name}`);
                    updateProgress(i + 1, objects.length, '–ó–∞–≥—Ä—É–∑–∫–∞ –æ–±—ä–µ–∫—Ç–æ–≤');

                    await new Promise(resolve => setTimeout(resolve, 100));
                }

                status.className = 'status success';
                status.innerHTML = `<strong>‚úì –£—Å–ø–µ—à–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ ${objects.length} –æ–±—ä–µ–∫—Ç–æ–≤!</strong><br>–î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä.`;
                log('=== –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï –ó–ê–í–ï–†–®–ï–ù–û –£–°–ü–ï–®–ù–û ===');
                
                btn.textContent = '–ì–æ—Ç–æ–≤–æ!';
                
            } catch (error) {
                log(`‚úó –û–®–ò–ë–ö–ê: ${error.message}`);
                status.className = 'status error';
                status.innerHTML = `<strong>–û—à–∏–±–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è:</strong><br>${error.message}`;
                btn.disabled = false;
                btn.textContent = '–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞';
            }
        }
    </script>
</body>
</html>
